=================================================
Analytic Accounting support for WIP and Variances
=================================================

.. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Alpha-red.png
    :target: https://odoo-community.org/page/development-status
    :alt: Alpha
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-OCA%2Faccount--analytic-lightgray.png?logo=github
    :target: https://github.com/OCA/account-analytic/tree/14.0/account_analytic_wip
    :alt: OCA/account-analytic
.. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
    :target: https://translation.odoo-community.org/projects/account-analytic-14-0/account-analytic-14-0-account_analytic_wip
    :alt: Translate me on Weblate
.. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
    :target: https://runbot.odoo-community.org/runbot/87/14.0
    :alt: Try me on Runbot

|badge1| |badge2| |badge3| |badge4| |badge5| 

This feature proposes a strategy to track and report work in progress and variances.
The work in progress can be split in subitems, such as Labour and Overhead.

The base components are implemented here, a minimum viable process is working,
but the process is best leveraged by other apps, such as Projects or Manufacturing.

Resource consumption is to be recorded as Analytic Items
when operations are logged in the system of resources.

These Analytic Items are then used to calculate WIP and variances
versus the original expected amounts.
An "Analytic Tracking Items" object is used to hold the expected amount,
and calculate the WIP and variances to record.

A regular scheduled job uses that information
to generate the corresponding accounting moves.

Products can be seen as cost drivers, driving consumption of other items.
For example a machine work time can drive consumptions of Labor and Overhead.

When an Analytic Item is created for a cost driver,
additional Analytic Items are generated for the corresponding indirect costs.
For example, each timesheet hour logged could generate a overhead amount related to that activity.

.. IMPORTANT::
   This is an alpha version, the data model and design can change at any time without warning.
   Only for development or testing purpose, do not use in production.
   `More details on development status <https://odoo-community.org/page/development-status>`_

**Table of contents**

.. contents::
   :local:

Usage
=====

The "Analytic Tracking Items" holds planned amounts, and tracks their WIP and variances.
These must be automatically created by specific logic in the Apps supporting them.

With this module alone the Tracking Item creation can be done manually:

* Navigate to ''Invoicing/Accounting > Reporting > Management > Analytic Tracking''
* Create an Analytic Tracking Item:

  * Set the Analytic Account.
  * Set the Product, use one that has a non-zero cost
    and belongs to a category with the "Costing" section configured.
  * Set the Planned Amount.


Analytic Items are used to record the actual costs:

* Navigate to *Invoicing/Accounting > Configuration
  > Analytic Accounting > Analytic Items*.

* Create an Analytic Item:

  * Set the Analytic Account, Description and Date.
  * Set the Product, use one that has a non-zero cost
    and belongs to a category with the "Costing" section configured.
  * Set the quantity consumed.
  * The Amount field should be automatically computed, with a negative amount.


Analytic Tracking Items are used to follow the costs incurred
and the comparison with the planned amounts. This can be used for analysis:

* Navigate to ''Invoicing/Accounting > Reporting > Management > Analytic Tracking''

* The list presents lines being tracked, and displays columns with Actual Amount,
  Expected Amount, WIP Amount, Variance Amount, etc.


WIP and variances journal entries are generated by a scheduled job:

* Navigate to *Setting > Technical > Automation > Scheduled Actions*.
* Locate and open the *Account: Process WIP and Variances* record, and click on the RUN MANUALLY button.
* Check the generated journal entries, at *Accounting > Miscellaneous > Journal Entries*.


When creating Analytic Items, if a configuration is in place, the corresponding Analytic Items for indirect cost are generated.

* When an Analytic Item is created, an automatic process checks the Activity Based Cost Rules to identify the ones that apply.
* Each triggered rule created a new Analytic Item, with a copy of the original one, and:

  * Product: is the rule Cost Type Product. A validation error prevents this from being the same as the source Analytic Item Product, to avoid infinite loops.
  * Quantity: is the original quantity multiplied by the rule's Factor
  * Amount: is -1 * Quantity * Product Standard Price
  * Parent Analytic Item (new field): set with the original Analytic Item

* An update on the Quantity triggers a recalculation of the quantity and amount of the child Analytic Items.
* A delete cascades to the child Analytic Items, causing them to also be deleted.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/OCA/account-analytic/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us smashing it by providing a detailed and welcomed
`feedback <https://github.com/OCA/account-analytic/issues/new?body=module:%20account_analytic_wip%0Aversion:%2014.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
~~~~~~~

* Open Source Integrators

Contributors
~~~~~~~~~~~~

* `Open Source Integrators <https://opensourceintegrators.com>`:

  * Daniel Reis <dreis@opensourceintegrators.com>
  * Chandresh Thakkar <cthakkar@opensourceintegrators.com>

Maintainers
~~~~~~~~~~~

This module is maintained by the OCA.

.. image:: https://odoo-community.org/logo.png
   :alt: Odoo Community Association
   :target: https://odoo-community.org

OCA, or the Odoo Community Association, is a nonprofit organization whose
mission is to support the collaborative development of Odoo features and
promote its widespread use.

.. |maintainer-dreispt| image:: https://github.com/dreispt.png?size=40px
    :target: https://github.com/dreispt
    :alt: dreispt

Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:

|maintainer-dreispt| 

This module is part of the `OCA/account-analytic <https://github.com/OCA/account-analytic/tree/14.0/account_analytic_wip>`_ project on GitHub.

You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
